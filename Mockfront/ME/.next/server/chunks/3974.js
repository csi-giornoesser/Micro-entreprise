exports.id=3974,exports.ids=[3974],exports.modules={2907:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},4237:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(21124);let e=a=>a??0===a?String(a):"—";function f({pieces:a=[],downloads:b=[],requiredTypes:c=[]}){let f=a.length,g=a.filter(a=>"valide"===a.statut).length,h=c.length?c.filter(b=>!a.some(a=>a.type===b)):[];return(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCC4 Pi\xe8ces justificatives"}),(0,d.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,d.jsxs)("div",{className:"text-sm mb-3",children:[(0,d.jsx)("strong",{children:"Statut:"})," ",g,"/",f," valid\xe9es",c.length?(0,d.jsxs)("span",{className:"ml-2",children:["— Requises manquantes: ",h.length?h.join(", "):"—"]}):null]}),(0,d.jsx)("ul",{className:"list-disc pl-6",children:f?a.map((a,b)=>{let c;return(0,d.jsxs)("li",{children:[e(a.type)," — ",e(a.fichier)," — ",e(a.statut),a.motif_refus?` (${a.motif_refus})`:""," ",a.uploaded_at?`(${(c=a.uploaded_at)?new Date(c).toISOString().slice(0,10):"—"})`:""]},b)}):(0,d.jsx)("li",{children:"—"})}),(0,d.jsx)("h4",{className:"font-medium mt-3",children:"T\xe9l\xe9chargements disponibles"}),(0,d.jsx)("ul",{className:"list-disc pl-6",children:b.length?b.map((a,b)=>(0,d.jsxs)("li",{children:[e(a.type)," — ",e(a.fichier)]},b)):(0,d.jsx)("li",{children:"—"})})]})]})}},14204:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(21124);let e=a=>a??0===a?String(a):"—";function f({client:a}){let b;if(!a)return null;let c=a.adresse_personnelle??{},f=a.adresse_fiscale??{};return(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83C\uDD94 Identit\xe9 & adresses"}),(0,d.jsx)("div",{className:"bg-white border rounded p-4",children:(0,d.jsxs)("ul",{className:"list-disc pl-6",children:[(0,d.jsxs)("li",{children:["Naissance: ",(b=a.date_naissance)?new Date(b).toLocaleDateString("fr-FR"):"—"," — ",e(a.commune_naissance),", ",e(a.pays_naissance)," — ",e(a.nationalite)]}),(0,d.jsxs)("li",{children:["Adresse perso: ",e(c.ligne1),", ",e(c.code_postal)," ",e(c.ville)]}),(0,d.jsxs)("li",{children:["Adresse fiscale",f.est_differente?"":" (identique)",": ",e(f.ligne1),", ",e(f.code_postal)," ",e(f.ville)]}),(0,d.jsxs)("li",{children:["NIR: ",e(a.numero_securite_sociale)]})]})})]})}},30531:()=>{},36517:(a,b,c)=>{"use strict";c.d(b,{A:()=>h});var d=c(21124),e=c(38301);let f=a=>a?new Date(a).toLocaleDateString("fr-FR"):null,g=["formulaire","pieces","mandat","transmission","traitement","siren","attestation"];function h({dossier:a}){let[b,c]=(0,e.useState)(null),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(!0),[p,q]=(0,e.useState)(null),r=(0,e.useCallback)(async()=>{i(!0),k(null);try{let b=await fetch(`/api/dossiers/${a.id}/timeline`,{cache:"no-store"});if(!b.ok)throw Error(`HTTP ${b.status}`);let d=await b.json();c(d)}catch(a){console.error("Erreur chargement timeline:",a),k("Impossible de charger les d\xe9tails du suivi")}finally{i(!1)}},[a?.id]),s=(0,e.useCallback)(async()=>{o(!0);try{let b=await fetch(`/api/dossiers/${a.id}/pieces`,{cache:"no-store"});if(!b.ok)throw Error(`HTTP ${b.status}`);let c=await b.json();m(c)}catch(a){console.error("Erreur chargement pi\xe8ces:",a)}finally{o(!1)}},[a?.id]),t=(0,e.useCallback)(a=>l?.pieces_state?.find(b=>b.piece_key===a),[l]),u=(0,e.useCallback)(a=>l?.pieces_expected?.find(b=>b.piece_key===a),[l]),v=(0,e.useMemo)(()=>{if(!l)return"pending";let a=new Set((l.pieces_expected||[]).filter(a=>"MandatSigne"!==a.piece_key&&!1!==a.required).map(a=>a.piece_key)),b=(l.pieces_state||[]).filter(a=>"MandatSigne"!==a.piece_key);return 0===b.length?"pending":[...a].every(a=>{let c=b.find(b=>b.piece_key===a);return c&&("valide"===c.status||"en_attente"===c.status)})?"completed":"pending"},[l]),w=(0,e.useMemo)(()=>{let a=t("MandatSigne");return a&&("valide"===a.status||"en_attente"===a.status)?"completed":"pending"},[t]),x=(0,e.useCallback)(async b=>{if(a?.id&&!p&&l?.capabilities?.canUpload!==!1)try{let c=document.createElement("input");c.type="file";let d=u(b);c.accept=(Array.isArray(d?.accept_ext)?d.accept_ext:[".pdf",".jpg",".jpeg",".png"]).join(","),c.style.display="none",document.body.appendChild(c),c.onchange=async d=>{let e=d.target.files?.[0];if(!e)return document.body.removeChild(c);if(e.size>0xa00000)return alert("❌ Fichier trop volumineux (max 10MB)"),document.body.removeChild(c);try{q(b);let c=new FormData;c.append("file",e);let d=await fetch(`/api/dossiers/${a.id}/pieces/${encodeURIComponent(b)}/upload`,{method:"POST",body:c});if(!d.ok){let a=await d.json().catch(()=>({})),b=a?.error_code?` [${a.error_code}]`:"";throw Error((a?.error||`HTTP ${d.status}`)+b)}await s(),alert("✅ Fichier upload\xe9 avec succ\xe8s !")}catch(a){alert(`❌ Upload \xe9chou\xe9: ${a.message}`)}finally{q(null),c.value="",document.body.contains(c)&&document.body.removeChild(c)}},c.click()}catch(a){q(null),alert(`❌ Erreur: ${a.message}`)}},[a?.id,p,l?.capabilities?.canUpload,u,s]),y=(0,e.useCallback)(async b=>{try{let c=await fetch(`/api/dossiers/${a.id}/documents/${b}/download`);if(!c.ok)throw Error("Document non disponible");let d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`${b}_${a.id}.pdf`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f)}catch(a){console.error("Erreur t\xe9l\xe9chargement:",a),alert("❌ Impossible de t\xe9l\xe9charger le document")}},[a?.id]),z=(0,e.useCallback)(async()=>{if(a?.id)try{let b=await fetch(`/api/dossiers/${a.id}/etapes/formulaire/completer`,{method:"POST"});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a?.error||`HTTP ${b.status}`)}await r()}catch(a){alert(`❌ ${a.message||"Erreur"}`)}},[a?.id,r]),A=(0,e.useMemo)(()=>{let c;if(!b)return[];let{timeline_steps:d,documents_officiels:e}=b,f=d?.find(a=>"formulaire"===a.id),g=f?.done??!!a?.date_creation,h=f?.date||a?.date_creation||null,i=(l?.pieces_state||[]).filter(a=>"MandatSigne"!==a.piece_key),j=i.filter(a=>"valide"===a.status||"en_attente"===a.status),k=j.map(a=>a.uploaded_at).filter(Boolean).map(a=>new Date(a).getTime()).sort((a,b)=>b-a)[0],m=k?new Date(k):null,o=t("MandatSigne"),p=(d||[]).find(a=>"transmission"===a.id),q=p?.status||"pending",r=p?.date||null,s=(d||[]).find(a=>"processing"===a.id),u=s?.status||"pending",x=s?.date||null;return[{id:"formulaire",title:"Formulaire rempli",description:g?"Vos informations ont \xe9t\xe9 enregistr\xe9es":"Informations \xe0 compl\xe9ter",status:g?"completed":"pending",icon:"\uD83D\uDCDD",date:h},{id:"pieces",title:"Pi\xe8ces requises",description:n?"Chargement des pi\xe8ces…":"completed"===v?"Toutes les pi\xe8ces requises sont envoy\xe9es":`${j.length} / ${i.length} pi\xe8ces upload\xe9es`,status:v,icon:"\uD83D\uDCC4",date:"completed"===v?m:null},{id:"mandat",title:"Mandat sign\xe9",description:"completed"===w?`Mandat upload\xe9${o?.uploaded_at?" le "+((c=o.uploaded_at)?new Date(c).toLocaleString("fr-FR"):null):""}`:"Mandat \xe0 signer",status:w,icon:"✍️",date:o?.uploaded_at||null},{id:"transmission",title:"Dossier transmis",description:"completed"===q?"Dossier transmis aux administrations":"En attente de transmission",status:q,icon:"\uD83D\uDCE4",date:r},{id:"traitement",title:"Dossier en cours de traitement",description:"V\xe9rification par les administrations",status:u,icon:"\uD83C\uDFDB️",date:x},{id:"siren",title:"SIREN attribu\xe9",description:"Num\xe9ro d'identification re\xe7u",status:e?.some(a=>"Avis de situation SIRENE"===a.type||a.type?.toUpperCase()?.includes("SIRENE")||a.type?.toUpperCase()?.includes("SIREN"))?"completed":"pending",icon:"\uD83C\uDD94",date:e?.find(a=>"Avis de situation SIRENE"===a.type||a.type?.toUpperCase()?.includes("SIRENE")||a.type?.toUpperCase()?.includes("SIREN"))?.date||null},{id:"attestation",title:"Attestation \xe0 t\xe9l\xe9charger",description:"Tous vos documents sont pr\xeats",status:e?.some(a=>"Attestation URSSAF"===a.type||a.type?.includes("Attestation"))&&a?.statut==="valide"?"completed":e?.some(a=>"Attestation URSSAF"===a.type||a.type?.includes("Attestation"))?"active":"pending",icon:"\uD83C\uDF89",date:e?.find(a=>"Attestation URSSAF"===a.type||a.type?.includes("Attestation"))?.date||null}]},[b,a?.date_creation,a?.statut,l,n,t,w,v]),B=(0,e.useMemo)(()=>[...A].sort((a,b)=>g.indexOf(a.id)-g.indexOf(b.id)),[A]),{completed:C,total:D,raw:E,percent:F}=(0,e.useMemo)(()=>(function(a){let b=a.length,c=a.filter(a=>"completed"===a.status).length,d=b?c/b*100:0;return{completed:c,total:b,raw:d,percent:Math.round(d)}})(B),[B]),G=Math.round(E);return a?h?(0,d.jsxs)("section",{className:"border rounded p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCCD Suivi de votre micro-entreprise"}),(0,d.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"\uD83D\uDD04 Chargement du suivi..."})})]}):j?(0,d.jsxs)("section",{className:"border rounded p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCCD Suivi de votre micro-entreprise"}),(0,d.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,d.jsxs)("div",{className:"text-red-800",children:["❌ ",j]}),(0,d.jsx)("button",{onClick:r,className:"mt-2 text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"\uD83D\uDD04 R\xe9essayer"})]})]}):(0,d.jsxs)("section",{className:"border rounded p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCCD Suivi de votre micro-entreprise"}),(0,d.jsxs)("div",{className:"mb-3 text-xs p-2 rounded border bg-gray-50 text-gray-700",children:[(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:"Calcul progression"})}),(0,d.jsxs)("div",{children:["completed: ",C," / total: ",D," → raw: ",E.toFixed(2),"% → affich\xe9: ",G,"%"]}),(0,d.jsx)("div",{className:"mt-1",children:B.map(a=>(0,d.jsxs)("span",{className:"inline-block mr-2 mt-1 px-2 py-0.5 rounded border",children:[a.id,": ",(0,d.jsx)("b",{children:a.status})]},a.id))})]}),(0,d.jsxs)("div",{className:"text-sm text-right",children:[(0,d.jsxs)("span",{className:"font-medium",children:[G,"% termin\xe9"]}),(0,d.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mt-1","aria-hidden":"true",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${G}%`}})}),b?.metrics?.estimated_completion&&(0,d.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Finalisation estim\xe9e: ",f(b.metrics.estimated_completion)]})]})]}),a?.blocages?.length>0&&(0,d.jsxs)("div",{className:"mb-4 p-3 rounded border bg-orange-50 text-orange-800",children:[(0,d.jsx)("span",{className:"mr-2",children:"⚠️"}),(0,d.jsx)("strong",{children:"Action requise :"})," ",a.blocages.join(", ")]}),(0,d.jsx)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:"text-2xl",children:"valide"===a.statut?"\uD83C\uDF89":"rejete"===a.statut?"❌":a.blocages?.length>0?"⚠️":"\uD83D\uDD04"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"font-semibold text-lg",children:"valide"===a.statut?"F\xe9licitations ! Votre micro-entreprise est cr\xe9\xe9e !":"rejete"===a.statut?"Dossier rejet\xe9 - Contactez votre conseiller":a.blocages?.length>0?"Action requise de votre part":"Votre dossier est en cours de traitement"}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Statut: ",(0,d.jsx)("strong",{children:a.statut})," • Dossier #",a.id]})]}),(0,d.jsx)("button",{onClick:()=>{r(),s()},className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",disabled:h||n,"aria-label":"Actualiser le suivi","aria-busy":h||n,children:"\uD83D\uDD04 Actualiser"})]})}),(0,d.jsx)("div",{className:"space-y-6",children:B.map((a,b)=>{var c;return(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("div",{className:(a=>{let b="flex items-center justify-center w-10 h-10 rounded-full text-sm font-medium";return"completed"===a?`${b} bg-green-500 text-white`:"active"===a?`${b} bg-blue-500 text-white animate-pulse`:"warning"===a?`${b} bg-orange-500 text-white`:"error"===a?`${b} bg-red-500 text-white`:`${b} bg-gray-300 text-gray-600`})(a.status),children:a.icon}),b<B.length-1&&(0,d.jsx)("div",{className:`w-1 h-12 mt-2 ${"completed"===(c=a.status)||"active"===c?"bg-green-300":"warning"===c?"bg-orange-300":"error"===c?"bg-red-300":"bg-gray-200"}`})]}),(0,d.jsxs)("div",{className:"flex-1 pb-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,d.jsx)("h4",{className:"font-semibold text-lg",children:a.title}),a.date&&(0,d.jsx)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",title:new Date(a.date).toISOString(),children:f(a.date)})]}),(0,d.jsx)("p",{className:"text-gray-600 mb-2",children:a.description}),"formulaire"===a.id&&"completed"!==a.status&&(0,d.jsx)("button",{onClick:z,className:"px-3 py-1.5 rounded text-xs font-medium border bg-blue-600 text-white hover:bg-blue-700",children:"✅ Marquer le formulaire comme fait"}),"pieces"===a.id&&!n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:(l?.pieces_state||[]).filter(a=>"MandatSigne"!==a.piece_key).map(a=>{let b="valide"===a.status||"en_attente"===a.status,c=l?.capabilities?.canUpload!==!1,e=p===a.piece_key||"valide"===a.status||!c,f=u(a.piece_key),g=Array.isArray(f?.accept_ext)?f.accept_ext.join(", "):"pdf, jpg, png",h=("valide"===a.status?"Valid\xe9e":"en_attente"===a.status?"En revue":"refusee"===a.status?`Refus\xe9e${a.reason?" — "+a.reason:""}`:"\xc0 fournir")+` • Formats: ${g}`;return(0,d.jsx)("button",{onClick:()=>x(a.piece_key),disabled:e,title:h,className:`px-3 py-1.5 rounded text-xs font-medium border transition disabled:opacity-50 ${b?"bg-green-50 text-green-800 border-green-200 hover:bg-green-100":"bg-red-50 text-red-800 border-red-200 hover:bg-red-100"}`,children:p===a.piece_key?"\uD83D\uDCE4 Envoi…":a.piece_label||a.piece_key},a.piece_key)})}),(0,d.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"\uD83D\uDFE2 Upload\xe9 / en revue • \uD83D\uDD34 \xc0 uploader"})]}),"mandat"===a.id&&(0,d.jsx)("div",{className:"flex items-center gap-2",children:(()=>{let a=t("MandatSigne"),b=a?.status||"missing",c="valide"===b||"en_attente"===b,e=l?.capabilities?.canUpload!==!1,f=u("MandatSigne"),g=Array.isArray(f?.accept_ext)?f.accept_ext.join(", "):"pdf, jpg, png",h=("valide"===b?"Mandat valid\xe9":"en_attente"===b?"En revue":"refusee"===b?`Refus\xe9${a?.reason?" — "+a.reason:""}`:"\xc0 fournir")+` • Formats: ${g}`;return(0,d.jsx)("button",{onClick:()=>x("MandatSigne"),disabled:"MandatSigne"===p||"valide"===b||!e,title:h,className:`px-3 py-1.5 rounded text-xs font-medium border transition disabled:opacity-50 ${c?"bg-green-50 text-green-800 border-green-200 hover:bg-green-100":"bg-red-50 text-red-800 border-red-200 hover:bg-red-100"}`,children:"MandatSigne"===p?"\uD83D\uDCE4 Envoi…":c?"Mandat ✅":"Uploader le mandat"})})()}),"siren"===a.id&&"completed"===a.status&&(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)("button",{onClick:()=>y("sirene"),className:"px-3 py-1.5 rounded text-xs font-semibold bg-green-600 text-white hover:bg-green-700",children:"\uD83D\uDCE5 T\xe9l\xe9charger l'avis SIRENE"})}),"attestation"===a.id&&"completed"===a.status&&(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)("button",{onClick:()=>y("attestation"),className:"px-3 py-1.5 rounded text-xs font-semibold bg-green-600 text-white hover:bg-green-700",children:"\uD83D\uDCE5 T\xe9l\xe9charger l'attestation"})})]})]},a.id)})}),(0,d.jsx)("div",{className:"mt-4 pt-3 border-t bg-gray-50 -m-4 p-4 rounded-b",children:(0,d.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Cr\xe9\xe9 le:"}),(0,d.jsx)("br",{}),f(a.date_creation)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Derni\xe8re MAJ:"}),(0,d.jsx)("br",{}),f(a.derniere_modification)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Documents g\xe9n\xe9r\xe9s:"}),(0,d.jsx)("br",{}),b?.metrics?.documents_officiels_count||0]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"R\xe9f\xe9rence:"}),(0,d.jsx)("br",{}),"#",a.id]})]})})]}):(0,d.jsxs)("section",{className:"border rounded p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCCD Suivi de votre dossier"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Aucun dossier s\xe9lectionn\xe9"})]})}},44603:()=>{},62740:(a,b,c)=>{"use strict";c.d(b,{A:()=>e});var d=c(21124);function e({relances:a=[],notifications:b=[]}){let c=[...a,...b];return(c=c.sort((a,b)=>(new Date(b.scheduled_for).getTime()||0)-(new Date(a.scheduled_for).getTime()||0))).length?(0,d.jsxs)("section",{className:"bg-white border rounded p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCE8 Historique (relances & notifications)"}),(0,d.jsx)("ul",{className:"space-y-3",children:c.map(a=>{let b;return(0,d.jsxs)("li",{className:"border rounded p-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[a.type.startsWith("relance")?(0,d.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-100 text-amber-800",children:"Relance"}):(0,d.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-800",children:"Notification"}),(0,d.jsx)("span",{className:"text-sm text-gray-600",children:a.canal||"—"})]}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:(b=a.scheduled_for)?new Date(b).toLocaleString("fr-FR"):"—"})]}),a.message&&""!==a.message.trim()?(0,d.jsx)("div",{className:"mt-1 text-sm text-gray-700 whitespace-pre-wrap",children:a.message}):(0,d.jsx)("div",{className:"mt-1 text-sm text-gray-400 italic",children:"Aucun message"})]},a.id)})})]}):(0,d.jsxs)("section",{className:"bg-white border rounded p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCE8 Historique (relances & notifications)"}),(0,d.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucune relance ou notification programm\xe9e."})]})}},70715:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(75338),e=c(66809),f=c(74025);c(82704);let g={title:"Create Next App",description:"Generated by create next app"};function h({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${e.variable} ${f.variable} antialiased`,children:a})})}},79347:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},82704:()=>{},96534:(a,b,c)=>{"use strict";c.d(b,{A:()=>j});var d=c(21124),e=c(3991);function f(a){if(!a)return"—";let b=new Date(a);if(!Number.isFinite(b.getTime()))return"—";try{return b.toLocaleDateString("fr-FR")}catch{return"—"}}let g=a=>{let b=function(a){if(!0===a||!1===a)return a;if(1===a||0===a)return!!a;if("string"==typeof a){let b=a.trim().toLowerCase();if("true"===b||"oui"===b)return!0;if("false"===b||"non"===b)return!1}}(a);return!0===b?"Oui":!1===b?"Non":"—"},h=a=>a??0===a?String(a):"—";function i(a,b=", "){let c=a.map(a=>a??0===a?String(a):"").map(a=>a.trim()).filter(a=>a&&"—"!==a);return c.length?c.join(b):"—"}function j({data:a}){if(!a?.entreprise)return null;let b=a.entreprise,c=Array.isArray(a.documents_generes)?a.documents_generes:[],j=Array.isArray(a.scraping_jobs)?a.scraping_jobs:[],k=Array.isArray(a.dossiers)?a.dossiers:[],l=b.donnees_gouvernement?.guichet_unique_INPI??b.gov_inpi??{},m=b.donnees_gouvernement?.INSEE_SIRENE??b.gov_insee??{},n=b.donnees_gouvernement?.URSSAF??b.gov_urssaf??{},o=b.donnees_gouvernement?.RNE??b.gov_rne??{},p=b.options_fiscales??{},q=b.checklist_conformite??{},r=b.titulaire_client,s=b.lieu_exercice?.adresse_etablissement??b.lieu_exercice?.adresse??{},t=i([s.ligne1,s.code_postal,s.ville]," "),u=b.activite?.description??b.activite?.libelle??"",v=m.SIREN??m.siren,w=m.SIRET_principal??m.siret,x=m.code_APE??m.ape,y=n.affiliation??n.statut,z=n.numero_affiliation??n.numero_compte,A=b.options_sociales??{};return(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDFE2 Mon entreprise"}),(0,d.jsxs)("div",{className:"bg-white border rounded p-4 space-y-5",children:[(0,d.jsxs)("div",{className:"border-b pb-3",children:[(0,d.jsx)("h4",{className:"font-semibold text-lg",children:h(b.denomination)}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mt-1",children:[(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{children:"Forme:"})," ",h(b.forme)]}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{children:"Statut:"})," ",h(b.statut_dossier)]}),(0,d.jsxs)("span",{children:[(0,d.jsx)("strong",{children:"Titulaire:"})," ",r?(0,d.jsx)(e,{href:`/crm/clients/${r.id}`,className:"underline",children:h(i([r.prenom,r.nom]," "))}):"—"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCD Activit\xe9 & lieu"}),(0,d.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[(0,d.jsxs)("li",{children:["Activit\xe9: ",h(u)]}),(0,d.jsxs)("li",{children:["Cat\xe9gorie: ",h(b.activite?.categorie)," — APE/NAF: ",h(b.activite?.APE_NAF??b.activite?.code_ape)]}),(0,d.jsxs)("li",{children:["R\xe9glem.: ",g(b.activite?.profession_reglementee)]}),(0,d.jsxs)("li",{children:["\xc9tablissement: ",t]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"\uD83D\uDCC5 Dates importantes"}),(0,d.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[(0,d.jsxs)("li",{children:["Demande: ",f(b.dates?.date_demande??b.dates?.demande)]}),(0,d.jsxs)("li",{children:["D\xe9but d’activit\xe9: ",f(b.dates?.date_debut_activite??b.dates?.debut_activite)]}),(0,d.jsxs)("li",{children:["Immatriculation r\xe9elle: ",f(b.dates?.date_immatriculation_reelle??b.dates?.immatriculation_reelle)]})]})]}),(b.options_sociales||b.options_fiscales)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-purple-800 mb-2",children:"⚖️ Options sociales & fiscales"}),(0,d.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[(0,d.jsxs)("li",{children:["R\xe9gime: ",h(A.regime)]}),(0,d.jsxs)("li",{children:["P\xe9riodicit\xe9: ",h(A.periodicite_versement??A.periodicite)]}),(0,d.jsxs)("li",{children:["Franchise TVA: ",g(p.franchise_TVA??p.franchise_tva)]}),(0,d.jsxs)("li",{children:["N\xb0 TVA intracom: ",h(p.numero_TVA_intracom??p.numero_tva)]}),(0,d.jsxs)("li",{children:["Versement lib\xe9ratoire IR: ",g(p.versement_liberatoire_IR??p.versement_liberatoire)]}),(0,d.jsxs)("li",{children:["Compta simplifi\xe9e: ",g(p.comptabilite_simplifiee)]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-red-800 mb-2",children:"\uD83C\uDFDB️ Donn\xe9es gouvernement"}),(0,d.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[(0,d.jsxs)("li",{children:["INPI: ",h(l.etat??l.statut)," — dossier ",h(l.numero_dossier??l.dossier)," — MAJ ",f(l.derniere_mise_a_jour??l.derniere_maj)]}),(0,d.jsxs)("li",{children:["INSEE/SIRENE — SIREN ",h(v),", SIRET ",h(w),", APE ",h(x)]}),(0,d.jsxs)("li",{children:["URSSAF — ",h(y),z?`, n\xb0 ${z}`:""]}),(0,d.jsxs)("li",{children:["RNE — ",h(o.inscription??o.statut)]})]})]}),q&&Object.keys(q).length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"✅ Conformit\xe9 (checklist)"}),(0,d.jsx)("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:Object.entries(q).map(([a,b])=>{let c="ok"===b||!0===b||1===b||"string"==typeof b&&"true"===b.toLowerCase(),e="ko"===b||!1===b||0===b||"string"==typeof b&&"false"===b.toLowerCase();return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:c?"text-green-600":e?"text-red-600":"text-gray-500",children:c?"✅":e?"❌":"—"}),(0,d.jsxs)("span",{children:[a.replace(/_/g," "),": ",h(b)]})]},a)})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-gray-800 mb-2",children:"\uD83D\uDCCB Documents g\xe9n\xe9r\xe9s"}),c.length?(0,d.jsx)("ul",{className:"space-y-1 text-sm",children:c.map((a,b)=>(0,d.jsxs)("li",{children:[f(a.date)," — ",h(a.type)," — ",h(a.fichier)," — source ",h(a.source)]},b))}):(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-gray-800 mb-2",children:"\uD83D\uDD78️ Scraping jobs"}),j.length?(0,d.jsx)("ul",{className:"space-y-1 text-sm",children:j.map(a=>(0,d.jsxs)("li",{children:[h(a.portail)," — ",h(a.etat)," — ",h(a.last_event)," — MAJ ",f(a.updated_at)]},a.id??`${a.portail}-${a.updated_at??""}`))}):(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"font-medium text-gray-800 mb-2",children:"\uD83D\uDCC2 Dossiers reli\xe9s"}),k.length?(0,d.jsx)("ul",{className:"space-y-1 text-sm",children:k.map(a=>(0,d.jsxs)("li",{children:["Dossier #",h(a.id)," — statut ",h(a.statut)," — client"," ",a.client_id?(0,d.jsxs)(e,{className:"underline",href:`/crm/clients/${a.client_id}`,children:["#",h(a.client_id)]}):"—"]},a.id))}):(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"—"})]})]})]})}}};